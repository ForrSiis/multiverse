<%= form_for(@card) do |f| %>
  <% if @card.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@card.errors.count, "error") %> prohibited this card from being saved:</h2>

      <ul>
      <% @card.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


<table border="0">         <!-- grouping table -->
 <tr>
  <td>                      <!-- card -->
   <!-- div class="cardtabs" id="tabs">
    <a href="#cardimage">Image</a>
    <a href="#mockup">Mockup</a>
   </div>
   <div class="onetab" id="cardimage"><a name="cardimage"></a>
     <img src="">
   </div>
   <div class="onetab" id="prettycard"><a name="mockup"></a -->
   <table class="card <%= @render_frame %>">
    <tr class="cardtitle">
     <td class="cardname">
      <div class="field">
        <%= f.label :name %><br />
        <%= f.text_field :name %>
      </div>

     <td class="cardcost" colspan="2">
      <div class="field">
        <%= f.label :cost %><br />
        <%= f.text_field :cost %>
      </div>
    <tr>                   <!-- art -->
     <td colspan="3" class="cardart">
       <%= f.label :art_url, "URL for art" %>
       <%= f.text_field :art_url, :class => "art_url_field" %>
    <tr class="cardtypeline"> <!-- type line -->
     <td class="minitext cardtype" colspan="2">
        <%= f.text_field :supertype %>
        <%= f.text_field :cardtype %> &ndash;
        <%= f.text_field :subtype %>
     <td class="cardrarity <%= @card.rarity %>" id="raritycell">
      <%= f.select :rarity, Card.rarities.map{|r| [r[0].chr.upcase, r]},
        { :selected => @card.rarity },
        { :onchange => "update_card_rarity(this.value)" } %>

    <tr>                   <!-- text box -->
     <td class="cardtext" colspan="3">
      <%= f.text_area :rulestext,   :class => "rulestextfield"   %>
      <div class="flavourtext">
      <%= f.text_area :flavourtext, :class => "flavourtextfield" %>
      </div>
    <tr class="cardptline">
     <td>
        <%= f.text_field :artist %>
     <td class="cardpt" colspan="2">
      <%= f.text_field :power, :size => 5, :class => "powerfield" %>/<%= f.text_field :toughness, :size => 5, :class => "toughnessfield" %>
   </table>
  </td>                    <!-- end of card -->

  <td>                     <!-- controls, comments etc -->
   <table>
    <tr>
     <td><%= f.label :image_url, "URL for whole card image" %>
     <td><%= f.text_field :image_url, :class => "image_url_field" %>
     </td>
    </tr>
    <% if @card.cardset.configuration.card_show_code %>
    <tr>
     <td><%= f.label :code %></td>
     <td><%= f.text_field :code %></td>
    </tr>
    <% end %>
    <% if @card.cardset.configuration.card_show_active %>
    <tr>
     <td><%= f.label :active, "Active?" %></td>
     <td><%= f.check_box :active %></td>
    </tr>
    <% end %>
    <!-- tr>
     <td><##%= f.label :colour %></td>
     <td><##%= f.select :colour, Card.colours.unshift("Auto").map{|c| [c.capitalize, c]} %></td>
    </tr -->
    <tr>
     <td><%= f.label :frame %></td>
     <% frames_keys = Card.frames %>
     <% frames_values = frames_keys.map { |frame| frame.gsub(/[()-]/, '') } %>
     <% frames = frames_keys.zip(frames_values) %>
     <td><%= f.select :frame, frames.unshift(["Auto", "Auto"]) %></td>
    </tr>
    <tr>
     <td colspan="2">
      <%= f.hidden_field :cardset_id, :value => @card.cardset_id %>
      <%= f.submit %>
     </td>
    </tr>
   </table>
  </td>
 </tr>
</table>

<% end %>
